<div id="content"></div>
<div class="center">
    <div class="chat">
      <div class="contact bar">
        <div class="pic stark"></div>
        <div class="name">
          Sample
        </div>
        <div class="seen">
          Today at 12:56
        </div>
      </div>
      <div class="messages" id="chat">
        <div class="time">
          Today at 11:41
        </div>
        <div id="messageList"></div>
      </div>
      <div class="input">
        <input placeholder="press to type" type="text" /><button class="chat_btn"><i class="fa fa-paper-plane"></i></button>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    var chat = document.getElementById('chat');
    chat.scrollTop = chat.scrollHeight - chat.clientHeight; 

    const source = new EventSource('/events');

    source.addEventListener('message', message => {
        const data = JSON.parse(message.data);      
      // Display the event data in the `content` div
        document.querySelector('#content').innerHTML = data.message;
        document.getElementById('messageList').innerHTML += '<div class="message ' + ((data.sent) ? 'parker' : 'stark') + '">' + data.message + '</div>';
    });
</script>
